<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.input.KeyCodeCombination?>



<AnchorPane fx:id="anchorPane" xmlns:fx="http://javafx.com/fxml" fx:controller="com.cgvsu.controller.GuiController">
    <MenuBar>
        <Menu mnemonicParsing="false" text="File">
            <MenuItem mnemonicParsing="false" onAction="#onOpenModelMenuItemClick" text="Load Model">
            <accelerator>
                <KeyCodeCombination alt="UP" control="DOWN" meta="UP" shift="UP" shortcut="UP" code="F"/>
            </accelerator>
            </MenuItem>
        </Menu>
        <Menu mnemonicParsing="false" text="Camera Options">
            <MenuItem mnemonicParsing="false" onAction="#handleCameraForward" text="Forward">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="UP"/>
                </accelerator>
            </MenuItem>
            <MenuItem mnemonicParsing="false" onAction="#handleCameraBackward" text="Backward">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="DOWN"/>
                </accelerator>
            </MenuItem>
            <MenuItem mnemonicParsing="false" onAction="#handleCameraLeft" text="Left">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="LEFT"/>
                </accelerator>
            </MenuItem>
            <MenuItem mnemonicParsing="false" onAction="#handleCameraRight" text="Right">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="RIGHT"/>
                </accelerator>
            </MenuItem>
            <MenuItem mnemonicParsing="false" onAction="#handleCameraUp" text="Up">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="W"/>
                </accelerator>
            </MenuItem>
            <MenuItem mnemonicParsing="false" onAction="#handleCameraDown" text="Down">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="S"/>
                </accelerator>
            </MenuItem>
        </Menu>
        <Menu mnemonicParsing="false" text="Transform">
            <MenuItem mnemonicParsing="false" onAction="#showTransformPanel" text="Show Transform Panel"/>
            <MenuItem mnemonicParsing="false" onAction="#hideTransformPanel" text="Hide Transform Panel"/>
            <MenuItem mnemonicParsing="false" onAction="#handleResetTransform" text="Reset Transform">
                <accelerator>
                    <KeyCodeCombination alt="UP" control="UP" meta="UP" shift="UP" shortcut="UP" code="R"/>
                </accelerator>
            </MenuItem>
        </Menu>
    </MenuBar>

    <Canvas fx:id="canvas" width="1600" height="870" AnchorPane.topAnchor="30.0"/>

    <!-- ПАНЕЛЬ УПРАВЛЕНИЯ ПРЕОБРАЗОВАНИЯМИ (изначально скрыта) -->
    <HBox fx:id="transformPanel" spacing="15" layoutX="10" layoutY="35"
          style="-fx-background-color: rgba(240,240,240,0.9); -fx-padding: 10; -fx-border-color: #ccc; -fx-border-width: 1;"
          visible="false" managed="false">
        <VBox spacing="5">
            <Label text="Position" style="-fx-font-weight: bold;"/>
            <Slider fx:id="translateXSlider" min="-10" max="10" value="0" showTickLabels="true" showTickMarks="true"
                    onMouseDragged="#handleTranslateX" onMouseClicked="#handleTranslateX"/>
            <Label text="X" style="-fx-font-size: 10;"/>
            <Slider fx:id="translateYSlider" min="-10" max="10" value="0" showTickLabels="true" showTickMarks="true"
                    onMouseDragged="#handleTranslateY" onMouseClicked="#handleTranslateY"/>
            <Label text="Y" style="-fx-font-size: 10;"/>
            <Slider fx:id="translateZSlider" min="-10" max="10" value="0" showTickLabels="true" showTickMarks="true"
                    onMouseDragged="#handleTranslateZ" onMouseClicked="#handleTranslateZ"/>
            <Label text="Z" style="-fx-font-size: 10;"/>
        </VBox>

        <VBox spacing="5">
            <Label text="Rotation" style="-fx-font-weight: bold;"/>
            <Slider fx:id="rotateXSlider" min="-180" max="180" value="0" showTickLabels="true" showTickMarks="true"
                    onMouseDragged="#handleRotateX" onMouseClicked="#handleRotateX"/>
            <Label text="X" style="-fx-font-size: 10;"/>
            <Slider fx:id="rotateYSlider" min="-180" max="180" value="0" showTickLabels="true" showTickMarks="true"
                    onMouseDragged="#handleRotateY" onMouseClicked="#handleRotateY"/>
            <Label text="Y" style="-fx-font-size: 10;"/>
            <Slider fx:id="rotateZSlider" min="-180" max="180" value="0" showTickLabels="true" showTickMarks="true"
                    onMouseDragged="#handleRotateZ" onMouseClicked="#handleRotateZ"/>
            <Label text="Z" style="-fx-font-size: 10;"/>
        </VBox>

        <VBox spacing="5">
            <Label text="Scale" style="-fx-font-weight: bold;"/>
            <Slider fx:id="scaleSlider" min="0.1" max="5" value="1" showTickLabels="true" showTickMarks="true"
                    onMouseDragged="#handleScale" onMouseClicked="#handleScale"/>
            <Label text="Uniform Scale" style="-fx-font-size: 10;"/>
        </VBox>

        <Button text="Reset" onAction="#handleResetTransform" style="-fx-pref-width: 60;"/>
        <Button text="Close" onAction="#hideTransformPanel" style="-fx-pref-width: 60;"/>
    </HBox>
</AnchorPane>